<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>UNDERTALE GOLD — Battle</title>
<style>
:root{
  --bg:#000; --fg:#f7f6fb; --muted:#a9a9b6;
  --gold:#ffd166; --gold2:#ffbd3a; --accent:#ff9f1c; --hp:#ff6b6b;
}
html,body{height:100%;margin:0;background:#000;color:var(--fg);font-family:ui-monospace,monospace}
#wrap{width:960px;margin:12px auto;position:relative}
canvas{display:block;margin:0 auto;border:4px solid #0a0a0f;background:#000;image-rendering:pixelated}
#hudTop{position:absolute;left:50%;top:6px;transform:translateX(-50%);width:920px;height:36px;display:flex;align-items:center;justify-content:space-between;color:#bdbdcf;font-size:12px}
#bossBar{position:absolute;left:20px;top:44px;color:#f7f6fb;font-size:14px}
#bossHP{height:10px;width:360px;background:#222;border:1px solid #444;margin-top:4px;position:relative}
#bossHPFill{position:absolute;left:0;top:0;bottom:0;background:var(--hp);width:100%}
#uiBar{position:absolute;left:50%;bottom:8px;transform:translateX(-50%);width:920px;height:116px;background:#0b0b0b;border:2px solid #202020;display:flex;align-items:center;justify-content:space-between;padding:0 18px}
.uiMenu{display:flex;gap:28px}
.uiBtn{display:flex;align-items:center;gap:10px;cursor:pointer}
.uiKey{width:20px;height:20px;border:2px solid #fff;display:flex;align-items:center;justify-content:center;font-weight:700}
.uiLabel{font-size:20px;color:#fff}
.uiBtn.sel .uiKey, .uiBtn:hover .uiKey{border-color:var(--gold)}
.uiBtn.sel .uiLabel, .uiBtn:hover .uiLabel{color:var(--gold)}
.uiFight .uiKey{border-color:var(--gold)}
.uiFight .uiLabel{color:var(--gold)}
#uiCenter{font-size:14px;color:#bdbdcf}
#uiRight{display:flex;align-items:center;gap:14px;font-size:12px;color:#bdbdcf}
#dialog{position:absolute;left:50%;bottom:132px;transform:translateX(-50%);width:880px;min-height:84px;background:#0b0b0b;border:2px solid #202020;padding:10px 14px;display:none}
#dialogText{white-space:pre-line;line-height:1.45}
#actList{display:none;margin-top:6px;color:#bdbdcf;font-size:13px}
#itemList{display:none;margin-top:6px;color:#bdbdcf;font-size:13px}
#box{position:absolute;left:240px;top:420px;width:480px;height:180px;border:3px solid #fff;display:none}
.tip{position:absolute;left:50%;top:56px;transform:translateX(-50%);color:var(--gold);background:#0c0c12;border:1px solid #202020;border-radius:8px;padding:6px 10px;font-size:12px;opacity:.95}
</style>
</head>
<body>
<div id="wrap">
  <div id="hudTop">
    <div id="hudL">Use arrows/WASD to move during enemy turn.</div>
    <div id="hudR">Z/Enter: confirm • X: back • Esc: retry</div>
  </div>

  <div id="bossBar">
    <div id="bossName">The Ember Crown</div>
    <div id="bossHP"><div id="bossHPFill"></div></div>
  </div>

  <canvas id="cv" width="960" height="720" aria-label="Battlefield"></canvas>

  <div id="box"></div>

  <div class="tip" id="tip">ACT to learn. Spare when they soften.</div>

  <div id="dialog" role="dialog" aria-modal="true">
    <div id="dialogText"></div>
    <div id="actList"></div>
    <div id="itemList"></div>
  </div>

  <div id="uiBar" role="group" aria-label="Battle menu">
    <div class="uiMenu" id="uiMenu">
      <div class="uiBtn uiFight sel" data-action="FIGHT"><div class="uiKey">Z</div><div class="uiLabel">FIGHT</div></div>
      <div class="uiBtn" data-action="ACT"><div class="uiKey">A</div><div class="uiLabel">ACT</div></div>
      <div class="uiBtn" data-action="ITEM"><div class="uiKey">I</div><div class="uiLabel">ITEM</div></div>
      <div class="uiBtn" data-action="MERCY"><div class="uiKey">M</div><div class="uiLabel">MERCY</div></div>
    </div>
    <div id="uiCenter">Your turn.</div>
    <div id="uiRight"><span id="playerName">Traveler</span> • HP <span id="hpText">20/20</span></div>
  </div>
</div>

<script>
/* Profile (from index.html) */
const PROF_LS='utg_shared_profile_v1';
function prof(){try{return JSON.parse(localStorage.getItem(PROF_LS))||{name:'Traveler',pronouns:'they/them',glow:'#ffd166'};}catch{return {name:'Traveler',pronouns:'they/them',glow:'#ffd166'};}}
const PRO=prof();

/* Elements */
const cv=document.getElementById('cv'), ctx=cv.getContext('2d');
const boxEl=document.getElementById('box');
const bossNameEl=document.getElementById('bossName');
const bossHPFill=document.getElementById('bossHPFill');
const uiMenu=document.getElementById('uiMenu');
const uiCenter=document.getElementById('uiCenter');
const playerNameEl=document.getElementById('playerName');
const hpText=document.getElementById('hpText');
const dialogEl=document.getElementById('dialog');
const dialogText=document.getElementById('dialogText');
const actListEl=document.getElementById('actList');
const itemListEl=document.getElementById('itemList');
playerNameEl.textContent=PRO.name;

/* Input */
class Input{
  constructor(){this.k=new Set();this.down=new Set();
    addEventListener('keydown',e=>{this.k.add(e.key);this.down.add(e.key);});
    addEventListener('keyup',e=>{this.k.delete(e.key);});
  }
  is(k){return this.k.has(k)||this.k.has(String(k).toUpperCase());}
  consume(k){const had=this.down.has(k)||this.down.has(String(k).toUpperCase());this.down.delete(k);this.down.delete(String(k).toUpperCase());return had;}
  tick(){this.down.clear();}
}
const input=new Input();

/* Helpers */
function clamp(v,a,b){return Math.max(a,Math.min(b,v));}
function rand(a,b){return Math.random()*(b-a)+a;}

/* Undertale-style heart */
function drawHeart(ctx,x,y,color,scale=1.2){
  ctx.save();ctx.translate(x,y);ctx.scale(scale,scale);
  const m=[[0,1,1,0,0,1,1,0],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,0],[0,0,1,1,1,1,0,0],[0,0,0,1,1,0,0,0]];
  ctx.fillStyle=color;const s=3;
  for(let r=0;r<m.length;r++) for(let c=0;c<m[r].length;c++) if(m[r][c]) ctx.fillRect((c-4)*s+40,(r-3)*s+20,s,s);
  ctx.restore();
}

/* Battle state */
const ARENA={x:240,y:420,w:480,h:180}; // visible box shown in enemy turn
const HEART={x:ARENA.x+ARENA.w/2,y:ARENA.y+ARENA.h/2,r:6,sp:220,i:0,hp:20,hpMax:20};
hpText.textContent=`${HEART.hp}/${HEART.hpMax}`;

/* Boss — a character sprite and dialog */
const BOSS={
  name:'The Ember Crown',
  hpMax:360, hp:360, spare:0, spareNeed:100,
  intro:[
    "A crowned flame watches.",
    "“You dare step into the hush?”"
  ],
  mid:[
    "“Your glow doesn’t fade.”",
    "“Fine. Brighter, then.”"
  ],
  acts:[
    {name:'Check', run:()=>({text:'Ember Crown — proud and patient.', sparePlus:6})},
    {name:'Compliment', run:()=>({text:'You praise its steady heat. It wavers.', sparePlus:14})},
    {name:'Breathe', run:()=>({text:'You breathe slow. Sparks relax.', sparePlus:16})}
  ],
  canSpare:(s)=> (s.boss.spare>=s.boss.spareNeed) || (s.boss.hp<=s.boss.hpMax*0.18),
  onHit:(s,dmg,crit)=>{ if(crit) s.boss.spare=Math.min(s.boss.spareNeed,(s.boss.spare||0)+8); },
  attacks:[] // filled below
};
bossNameEl.textContent=BOSS.name;

/* Undertale-style patterns */
let bullets=[];
function spawn(b){b.t=0;bullets.push(b);return b;}
const P={
  radial:(speed=120, dur=6, col='#ff9f1c')=>({
    enter(){this.t=0;},
    update(dt){this.t+=dt;if(this.t>0.6){this.t=0;const N=16;for(let i=0;i<N;i++){const a=i*(Math.PI*2)/N + time*0.4;spawn({x:ARENA.x+ARENA.w/2,y:ARENA.y+ARENA.h/2,vx:Math.cos(a)*speed,vy:Math.sin(a)*speed,r:3,col});}}},
    done(){return phaseT>dur;}
  }),
  aimed:(rate=0.05,speed=190,col='#ffd2ae',dur=7)=>({
    enter(){},
    update(dt){ if(Math.random()<rate){const side=Math.random()<0.5?'L':'R';const x=side==='L'?ARENA.x-12:ARENA.x+ARENA.w+12;const y=rand(ARENA.y,ARENA.y+ARENA.h);const dx=HEART.x-x,dy=HEART.y-y,L=Math.hypot(dx,dy)||1;spawn({x,y,vx:dx/L*speed,vy:dy/L*speed,r:4,col});} },
    done(){return phaseT>dur;}
  }),
  bouncers:(n=4,speed=140,col='#ffd166',dur=8)=>({
    enter(){for(let i=0;i<n;i++){spawn({x:ARENA.x+rand(40,ARENA.w-40),y:ARENA.y+rand(20,ARENA.h-20),vx:rand(-speed,speed),vy:rand(-speed,speed),r:6,col,type:'bounce'})}},
    update(dt){},
    done(){return phaseT>dur;}
  }),
  serpent:(step=0.22,headV=90,shardV=220,dur=8,cHead='#fff',cShard='#ffd166')=>({
    enter(){this.t=0;this.a=-Math.PI/3;this.dir=1;},
    update(dt){this.t+=dt;this.a+=dt*0.6*this.dir; if(this.a>Math.PI/3)this.dir=-1; if(this.a<-Math.PI/3)this.dir=1;
      if(this.t>step){this.t=0;const vx=Math.cos(this.a)*headV,vy=Math.sin(this.a)*headV;const head=spawn({x:ARENA.x+ARENA.w/2,y:ARENA.y+ARENA.h/2,vx,vy,r:5,col:cHead});head.life=0;head.onTick=(S,b,dt)=>{b.life+=dt;if(Math.floor(b.life*10)%4===0 && b.life<1.6){for(let k=-1;k<=1;k+=2){const ang=Math.atan2(b.vy,b.vx)+k*0.42;spawn({x:b.x,y:b.y,vx:Math.cos(ang)*shardV,vy:Math.sin(ang)*shardV,r:3,col:cShard});}} if(b.life>2.2) b.dead=true;};}},
    done(){return phaseT>dur;}
  }),
  echo:(step=0.55,shotMul=3,dur=8,col='#a6c7ff')=>({
    enter(){this.t=0;this.last={x:HEART.x,y:HEART.y};},
    update(dt){this.t+=dt;if(this.t>step){this.t=0;const dx=HEART.x-this.last.x,dy=HEART.y-this.last.y;spawn({x:this.last.x,y:this.last.y,vx:dx*shotMul,vy:dy*shotMul,r:4,col});this.last={x:HEART.x,y:HEART.y};}},
    done(){return phaseT>dur;}
  }),
  scan:(dur=7,col='#ff6b6b')=>({
    enter(){this.t=0;},
    update(dt){this.t+=dt;if(this.t>0.9){this.t=0;const y=rand(ARENA.y+14,ARENA.y+ARENA.h-14);for(let x=ARENA.x+20;x<ARENA.x+ARENA.w-20;x+=40){spawn({x,y,vx:0,vy:0,r:4,col,type:'pulse'})}}},
    done(){return phaseT>dur;}
  }),
  eyeSweep:(dur=7)=>({
    enter(){this.t=0;},
    update(dt){this.t+=dt; if(Math.random()<0.25){const y=rand(ARENA.y+20,ARENA.y+ARENA.h-20);const dir=Math.random()<0.5?1:-1;spawn({x:ARENA.x-20,y, vx:dir*260, vy:0, r:3, col:'#ffd166', type:'laser'});} },
    done(){return phaseT>dur;}
  })
};
BOSS.attacks=[ P.eyeSweep(7), P.radial(120,6,'#ff9f1c'), P.echo(0.55,3,8,'#a6c7ff'), P.serpent(0.22,90,220,8,'#fff','#ffd166'), P.scan(7,'#ff6b6b') ];

/* Flow */
let time=0, phaseT=0;
let turn='player', menu='root';
let fightActive=false, fightX=0, fightSpd=520;
let attack=null, attackIndex=0;

function updateHP(){hpText.textContent=`${HEART.hp}/${HEART.hpMax}`;}
function bossBar(){bossHPFill.style.width=(360*Math.max(0,BOSS.hp/BOSS.hpMax))+'px';}

/* Dialog */
function openDialog(lines){dialogText.textContent=lines.join('\n'); dialogEl.style.display='block';}
function closeDialog(){dialogEl.style.display='none'; actListEl.style.display='none'; itemListEl.style.display='none';}

/* Menus */
function setSelection(ix){
  [...uiMenu.children].forEach((c,i)=>c.classList.toggle('sel',i===ix));
  selIx=ix;
}
let selIx=0;
function choose(){const map=['FIGHT','ACT','ITEM','MERCY'];doAction(map[selIx]);}
function doAction(name){
  if(turn!=='player') return;
  if(name==='FIGHT'){
    menu='fight'; fightActive=true; fightX=ARENA.x+40;
    uiCenter.textContent='Time it in the center!';
  }else if(name==='ACT'){
    menu='act'; actListEl.innerHTML=BOSS.acts.map((a,i)=>`${i+1}. ${a.name}`).join('<br>'); actListEl.style.display='block';
    dialogText.textContent='Choose an action (1–3).'; dialogEl.style.display='block';
  }else if(name==='ITEM'){
    menu='item'; itemListEl.innerHTML='1. Warm Sip (+8 HP)<br>2. Ember Flask (+14 HP)<br>3. Radiant Draught (+24 HP)';
    itemListEl.style.display='block'; dialogText.textContent='Use an item (1–3).'; dialogEl.style.display='block';
  }else if(name==='MERCY'){
    menu='mercy'; dialogText.textContent = canSpare() ? 'SPARE is available — press Z/Enter.' : 'They are not ready.'; dialogEl.style.display='block';
  }
}
function endPlayerTurn(d=0.2){ setTimeout(()=>{ turn='enemy'; menu='root'; uiCenter.textContent='Enemy turn'; boxEl.style.display='block'; startAttack(); }, d*1000); }
function canSpare(){return BOSS.canSpare({boss:BOSS});}

/* Fight resolve */
function resolveFight(){
  fightActive=false;
  const L=ARENA.x+40,R=ARENA.x+ARENA.w-40;
  const pos=(fightX-L)/((R-L)||1);
  const crit = pos>=0.46 && pos<=0.54;
  const dmg = Math.round((28 + (crit?18:0)) * (0.9+Math.random()*0.2));
  BOSS.hp=Math.max(0,BOSS.hp-dmg); bossBar();
  BOSS.onHit?.({boss:BOSS},dmg,crit);
  uiCenter.textContent = crit ? 'CRITICAL!' : 'Hit!';
  endPlayerTurn(0.35);
}

/* ACT & ITEM handlers */
function useItem(ix){
  const items=[{n:'Warm Sip',h:8},{n:'Ember Flask',h:14},{n:'Radiant Draught',h:24}];
  const it=items[ix]; if(!it) return;
  HEART.hp=Math.min(HEART.hpMax,HEART.hp+it.h); updateHP();
  dialogText.textContent=`Used ${it.n} (+${it.h} HP).`; setTimeout(()=>{closeDialog(); endPlayerTurn(0.3);},350);
}
function doAct(ix){
  const act=BOSS.acts[ix]; if(!act) return;
  const res=act.run({boss:BOSS}); if(res.sparePlus) BOSS.spare=Math.min(BOSS.spareNeed,(BOSS.spare||0)+res.sparePlus);
  dialogText.textContent=res.text; actListEl.style.display='none';
  setTimeout(()=>{closeDialog(); endPlayerTurn(0.3);},450);
}

/* Enemy phase */
function startAttack(){bullets.length=0; phaseT=0; attack=BOSS.attacks[attackIndex]; attackIndex=(attackIndex+1)%BOSS.attacks.length; attack?.enter?.();}
function finishAttack(){turn='player'; uiCenter.textContent='Your turn'; boxEl.style.display='none'; if(BOSS.hp<BOSS.hpMax*0.5 && !BOSS._mid){openDialog(BOSS.mid);BOSS._mid=true;}}

/* Boss sprite draw */
function drawBoss(ctx,t){
  const x=480,y=260,r=28+Math.sin(t*3)*3;
  // crown
  ctx.fillStyle='#ffc94a'; ctx.beginPath(); ctx.moveTo(x-20,y-28); ctx.lineTo(x-10,y-8); ctx.lineTo(x,y-28); ctx.lineTo(x+10,y-8); ctx.lineTo(x+20,y-28); ctx.closePath(); ctx.fill();
  // face
  ctx.save(); ctx.shadowColor='#ffd166'; ctx.shadowBlur=10;
  ctx.fillStyle='#ffb347'; ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
  ctx.shadowBlur=0;
  // eyes
  ctx.fillStyle='#0c0c12'; ctx.fillRect(x-8,y-6,6,6); ctx.fillRect(x+2,y-6,6,6);
  // ring
  ctx.strokeStyle='#ffd166'; ctx.globalAlpha=0.6; ctx.beginPath(); ctx.arc(x,y,r+10,0,Math.PI*2); ctx.stroke(); ctx.globalAlpha=1; ctx.restore();
}

/* Intro */
function startBattle(){
  BOSS.hp=BOSS.hpMax; BOSS.spare=0; BOSS._mid=false; bossBar();
  HEART.hp=20; updateHP(); HEART.i=0; HEART.x=ARENA.x+ARENA.w/2; HEART.y=ARENA.y+ARENA.h/2;
  turn='player'; menu='root'; uiCenter.textContent='Your turn'; boxEl.style.display='none';
  openDialog(BOSS.intro);
}
startBattle();

/* Loop */
let last=performance.now();
function loop(now){
  const dt=Math.min(0.033,(now-last)/1000); last=now; time+=dt; input.tick();
  // background
  ctx.fillStyle='#0f0a08'; ctx.fillRect(0,0,960,720);

  // boss
  drawBoss(ctx,time);

  // box: bullets and heart during enemy turn
  if(turn==='enemy'){
    phaseT+=dt;
    // heart movement
    if(input.is('ArrowLeft')||input.is('a')) HEART.x-=HEART.sp*dt;
    if(input.is('ArrowRight')||input.is('d')) HEART.x+=HEART.sp*dt;
    if(input.is('ArrowUp')||input.is('w')) HEART.y-=HEART.sp*dt;
    if(input.is('ArrowDown')||input.is('s')) HEART.y+=HEART.sp*dt;
    HEART.x=clamp(HEART.x,ARENA.x+HEART.r,ARENA.x+ARENA.w-HEART.r);
    HEART.y=clamp(HEART.y,ARENA.y+HEART.r,ARENA.y+ARENA.h-HEART.r);
    HEART.i=Math.max(0,HEART.i-dt);

    // attack update
    attack?.update?.(dt);

    // bullets
    for(const b of bullets){
      b.t+=dt;
      if(b.type==='bounce'){
        b.x+=b.vx*dt; b.y+=b.vy*dt;
        if(b.x-b.r<ARENA.x||b.x+b.r>ARENA.x+ARENA.w) b.vx*=-1;
        if(b.y-b.r<ARENA.y||b.y+b.r>ARENA.y+ARENA.h) b.vy*=-1;
      }else if(b.type==='pulse'){
        b.r=3+Math.sin(time*6 + b.x*0.02)*2;
      }else if(b.type==='laser'){
        b.x+=b.vx*dt;
      }else{
        b.x+=b.vx*dt; b.y+=b.vy*dt;
      }
      // onTick
      if(b.onTick) b.onTick(null,b,dt);
    }
    bullets=bullets.filter(b=>!b.dead && b.x>ARENA.x-80 && b.x<ARENA.x+ARENA.w+80 && b.y>ARENA.y-80 && b.y<ARENA.y+ARENA.h+80);

    // collision
    for(const b of bullets){
      const dx=b.x-HEART.x, dy=b.y-HEART.y, rr=(b.r||4)+HEART.r;
      if(dx*dx+dy*dy<=rr*rr && HEART.i<=0){
        HEART.hp--; updateHP(); HEART.i=0.9;
      }
    }

    // end phase
    if(attack?.done && attack.done()){ finishAttack(); }

    // defeat
    if(HEART.hp<=0){
      openDialog(["You fall. The crown dims. Then waits."]);
      setTimeout(()=>startBattle(),900);
    }
  }

  // draw bullets
  for(const b of bullets){ctx.fillStyle=b.col||'#fff';ctx.beginPath();ctx.arc(b.x,b.y,b.r||4,0,Math.PI*2);ctx.fill();}

  // fight bar when FIGHT active
  if(turn==='player' && menu==='fight' && fightActive){
    const L=ARENA.x+40,R=ARENA.x+ARENA.w-40,Y=ARENA.y-30;
    // crit markers
    ctx.fillStyle=varColor('--gold'); ctx.fillRect(L+(R-L)*0.46, Y-10, 2, 20); ctx.fillRect(L+(R-L)*0.54, Y-10, 2, 20);
    // cursor
    fightX+=fightSpd* (Math.min(0.033,(performance.now()-last)/1000) || 0.016);
    ctx.fillStyle='#fff1b6'; ctx.fillRect(fightX, Y-6, 3, 12);
    // golden flash behind (subtle)
    ctx.globalAlpha=0.25; ctx.fillStyle='#ffd166'; ctx.fillRect(L, Y-14, R-L, 28); ctx.globalAlpha=1;
    if(input.consume('z')||input.consume('Z')||input.consume('Enter')) resolveFight();
    if(fightX>R) resolveFight();
  }

  // heart
  ctx.save(); if(HEART.i>0) ctx.globalAlpha=0.6+0.3*Math.sin(time*20);
  drawHeart(ctx,HEART.x-20,HEART.y-24,PRO.glow);
  ctx.restore();

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

/* Color helper from CSS var */
function varColor(name){return getComputedStyle(document.documentElement).getPropertyValue(name).trim();}

/* UI interactions */
uiMenu.addEventListener('mousemove',e=>{
  const item=e.target.closest('.uiBtn'); if(!item) return;
  const ix=[...uiMenu.children].indexOf(item); if(ix>=0) setSelection(ix);
});
uiMenu.addEventListener('click',()=>choose());
addEventListener('keydown',e=>{
  if(e.key==='Escape'){startBattle(); return;}
  if(turn!=='player'){
    // allow no input during enemy except Esc
    return;
  }
  if(menu==='root'){
    if(e.key==='ArrowLeft') setSelection(Math.max(0,selIx-1));
    if(e.key==='ArrowRight') setSelection(Math.min(3,selIx+1));
    if(e.key==='z'||e.key==='Z'||e.key==='Enter') choose();
    if(e.key==='x'||e.key==='X'){ /* back: noop on root */ }
  }else if(menu==='fight'){
    if(e.key==='x'||e.key==='X'){ fightActive=false; menu='root'; uiCenter.textContent='Your turn'; }
  }else if(menu==='act'){
    if(['1','2','3'].includes(e.key)) doAct(parseInt(e.key)-1);
    if(e.key==='x'||e.key==='X'){ closeDialog(); menu='root'; uiCenter.textContent='Your turn'; }
  }else if(menu==='item'){
    if(['1','2','3'].includes(e.key)) useItem(parseInt(e.key)-1);
    if(e.key==='x'||e.key==='X'){ closeDialog(); menu='root'; uiCenter.textContent='Your turn'; }
  }else if(menu==='mercy'){
    if(e.key==='z'||e.key==='Z'||e.key==='Enter'){ if(canSpare()){ closeDialog(); openDialog(["You offered mercy.","The flame bows."]); setTimeout(()=>startBattle(),800);} else { dialogText.textContent='They are not ready.'; } }
    if(e.key==='x'||e.key==='X'){ closeDialog(); menu='root'; uiCenter.textContent='Your turn'; }
  }
});
</script>
</body>
</html>

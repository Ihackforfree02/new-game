<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>UNDERTALE GOLD — Menu</title>
<style>
:root{--bg:#000;--fg:#f7f6fb;--muted:#a9a9b6;--panel:#0d0c12;--line:#1b1a22;--gold:#ffd166}
html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:ui-monospace,monospace}
#wrap{max-width:840px;margin:24px auto;padding:16px}
.card{background:#0b0b12;border:1px solid #1b1a22;border-radius:12px;padding:16px}
h1{margin:8px 0 4px 0;color:var(--gold)}
small{color:var(--muted)}
.row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin:8px 0}
.label{min-width:120px;color:var(--muted)}
.inp{background:#0c0c12;border:1px solid #1b1a22;color:#f7f6fb;border-radius:8px;padding:8px 10px;font-family:monospace}
.btn{background:#11121a;color:#f7f6fb;border:1px solid #1b1a22;border-radius:8px;padding:10px 14px;cursor:pointer}
.btnPrimary{background:var(--gold);color:#111;border-color:#111}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:12px}
.sw{width:34px;height:34px;border-radius:6px;border:1px solid #1b1a22;cursor:pointer}
.footer{margin-top:12px;display:flex;gap:8px;align-items:center;color:var(--muted)}
canvas{image-rendering:pixelated}
hr{border:0;border-top:1px solid #1b1a22;margin:14px 0}
.note{font-size:12px;color:#a9a9b6}
</style>
</head>
<body>
<div id="wrap">
  <div class="card">
    <h1>UNDERTALE GOLD</h1>
    <div class="row"><small>Walk until your heart glows.</small></div>
    <hr/>
    <div class="row">
      <div class="label">Name</div>
      <input id="nameInput" class="inp" type="text" maxlength="12" placeholder="Traveler"/>
    </div>
    <div class="row">
      <div class="label">Pronouns</div>
      <select id="pronouns" class="inp">
        <option value="they/them">they/them</option>
        <option value="she/her">she/her</option>
        <option value="he/him">he/him</option>
        <option value="custom">custom…</option>
      </select>
      <input id="pronounsCustom" class="inp" type="text" placeholder="xe/xem" style="display:none"/>
    </div>
    <div class="row" style="align-items:flex-start">
      <div class="label">Glow color</div>
      <div id="swRow" class="row" style="gap:8px"></div>
      <canvas id="heartPrev" width="100" height="100" style="width:100px;height:100px"></canvas>
    </div>
    <div class="footer">
      <button id="saveBtn" class="btn">Save profile</button>
      <span id="status" class="note">Profile autosaves when launching a mode.</span>
    </div>
    <hr/>
    <div class="grid">
      <div>
        <h3 style="margin:0 0 6px 0">Story</h3>
        <small class="note">Explore as a human with a golden heart, talk to NPCs, save at embers, discover the Emberwild.</small>
        <div class="row" style="margin-top:8px">
          <a href="story.html" id="storyLink" class="btn btnPrimary">Play story</a>
        </div>
      </div>
      <div>
        <h3 style="margin:0 0 6px 0">Battle</h3>
        <small class="note">Boss rush: control the heart in the box, fight wave after wave with unique patterns.</small>
        <div class="row" style="margin-top:8px">
          <a href="battle.html" id="battleLink" class="btn btnPrimary">Play battle</a>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
const LS='utg_shared_profile_v1';
const PALETTE=['#ffd166','#ff9f1c','#ff6b6b','#ffc4a3','#fff1b6','#ffdd55','#ffb347','#ffd2ae','#fff3d0','#ffe299','#a6c7ff','#7affb7'];
function defProfile(){return{name:'Traveler',pronouns:'they/them',glow:'#ffd166'};}
function load(){try{const r=localStorage.getItem(LS);return r?JSON.parse(r):defProfile();}catch{return defProfile();}}
function save(p){try{localStorage.setItem(LS,JSON.stringify(p));setStatus('Saved');}catch{setStatus('Save error');}}
function setStatus(t){document.getElementById('status').textContent=t;setTimeout(()=>{document.getElementById('status').textContent='Profile autosaves when launching a mode.'},1500);}
const P=load();
const nameInput=document.getElementById('nameInput');
const pronouns=document.getElementById('pronouns');
const pronounsCustom=document.getElementById('pronounsCustom');
const swRow=document.getElementById('swRow');
const heartPrev=document.getElementById('heartPrev').getContext('2d');
function drawHeart(ctx,x,y,color,scale=2){ctx.save();ctx.translate(x,y);ctx.scale(scale,scale);const m=[[0,1,1,0,0,1,1,0],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,0],[0,0,1,1,1,1,0,0],[0,0,0,1,1,0,0,0]];ctx.fillStyle=color;const s=4;for(let r=0;r<m.length;r++)for(let c=0;c<m[r].length;c++) if(m[r][c]) ctx.fillRect((c-4)*s+40,(r-3)*s+20,s,s);ctx.restore();}
function redraw(){heartPrev.clearRect(0,0,100,100);drawHeart(heartPrev,0,0,P.glow,2);}
function buildSwatches(){swRow.innerHTML='';PALETTE.forEach(c=>{const d=document.createElement('div');d.className='sw';d.style.background=c;d.onclick=()=>{P.glow=c;redraw();};swRow.appendChild(d);});}
nameInput.value=P.name||'';
pronouns.value=(P.pronouns==='they/them'||P.pronouns==='she/her'||P.pronouns==='he/him')?P.pronouns:'custom';
if(pronouns.value==='custom'){pronounsCustom.style.display='inline-block';pronounsCustom.value=P.pronouns;}
pronouns.onchange=()=>{pronounsCustom.style.display=(pronouns.value==='custom')?'inline-block':'none';};
buildSwatches();redraw();
document.getElementById('saveBtn').onclick=()=>{P.name=nameInput.value.trim()||'Traveler';P.pronouns=(pronouns.value==='custom')?(pronounsCustom.value.trim()||'they/them'):pronouns.value;save(P);};
document.getElementById('storyLink').onclick=()=>{P.name=nameInput.value.trim()||'Traveler';P.pronouns=(pronouns.value==='custom')?(pronounsCustom.value.trim()||'they/them'):pronouns.value;save(P);};
document.getElementById('battleLink').onclick=()=>{P.name=nameInput.value.trim()||'Traveler';P.pronouns=(pronouns.value==='custom')?(pronounsCustom.value.trim()||'they/them'):pronouns.value;save(P);};
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Black Hole Snake.io</title>
  <style>
    html, body {
      margin: 0;
      overflow: hidden;
      background: radial-gradient(circle at center, #000010 0%, #000000 100%);
    }
    canvas {
      display: block;
    }
    #adminPanel {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0,0,0,0.85);
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #444;
      display: none;
      z-index: 10;
      color: white;
      font-family: sans-serif;
    }
    #adminPanel h3 {
      margin-top: 0;
      color: #7be3ff;
    }
    #adminPanel button {
      margin: 4px 0;
      padding: 6px 10px;
      background: #123;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
    }
  </style>
</head>
<body>
<canvas id="gameCanvas"></canvas>

<div id="adminPanel">
  <h3>Admin Panel</h3>
  <button onclick="state.invincible = true">Toggle Invincibility</button>
  <button onclick="spawnBot()">Spawn Bot</button>
  <button onclick="state.abilities.push('speed')">Unlock Speed Boost</button>
  <button onclick="state.abilities.push('minis')">Unlock Mini Holes</button>
  <button onclick="state.abilities.push('pulse')">Unlock Gravity Pulse</button>
  <button onclick="state.abilities.push('slow')">Unlock Time Warp</button>
  <button onclick="document.getElementById('adminPanel').style.display='none'">Close</button>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let W = window.innerWidth;
let H = window.innerHeight;
canvas.width = W;
canvas.height = H;

const state = {
  x: W/2,
  y: H/2,
  vx: 0,
  vy: 0,
  tail: [],
  dots: [],
  bots: [],
  abilities: [],
  invincible: true,
  adminCode: '',
  adminCount: 0
};

function spawnDot(x, y) {
  state.dots.push({
    x: x || Math.random() * W,
    y: y || Math.random() * H,
    r: 6 + Math.random() * 4,
    color: `hsl(${Math.random()*360}, 80%, 60%)`
  });
}

function spawnBot() {
  state.bots.push({
    x: Math.random() * W,
    y: Math.random() * H,
    tail: [],
    color: `hsl(${Math.random()*360}, 80%, 60%)`
  });
}

function drawDot(d) {
  ctx.fillStyle = d.color;
  ctx.beginPath();
  ctx.arc(d.x, d.y, d.r, 0, Math.PI*2);
  ctx.fill();
}

function drawTail(tail, color) {
  ctx.fillStyle = color;
  tail.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 10, 0, Math.PI*2);
    ctx.fill();
  });
}

function update() {
  if (state.keys['ArrowLeft'] || state.keys['a']) state.vx = -4;
  if (state.keys['ArrowRight'] || state.keys['d']) state.vx = 4;
  if (state.keys['ArrowUp'] || state.keys['w']) state.vy = -4;
  if (state.keys['ArrowDown'] || state.keys['s']) state.vy = 4;

  state.x += state.vx;
  state.y += state.vy;

  state.tail.push({x: state.x, y: state.y});
  if (state.tail.length > 50) state.tail.shift();

  state.dots.forEach((d, i) => {
    const dx = d.x - state.x;
    const dy = d.y - state.y;
    const dist = Math.sqrt(dx*dx + dy*dy);
    if (dist < 20) {
      state.dots.splice(i,1);
      state.tail.push({x: state.x, y: state.y});
    }
  });

  state.bots.forEach(bot => {
    bot.x += (Math.random()-0.5)*4;
    bot.y += (Math.random()-0.5)*4;
    bot.tail.push({x: bot.x, y: bot.y});
    if (bot.tail.length > 40) bot.tail.shift();

    state.dots.forEach((d, i) => {
      const dx = d.x - bot.x;
      const dy = d.y - bot.y;
      const dist = Math.sqrt(dx*dx + dy*dy);
      if (dist < 20) {
        state.dots.splice(i,1);
        bot.tail.push({x: bot.x, y: bot.y});
      }
    });
  });

  if (Math.random() < 0.05) spawnDot();
}

function draw() {
  ctx.clearRect(0,0,W,H);
  state.dots.forEach(drawDot);
  drawTail(state.tail, '#7be3ff');
  state.bots.forEach(bot => drawTail(bot.tail, bot.color));
  ctx.fillStyle = '#fff';
  ctx.beginPath();
  ctx.arc(state.x, state.y, 12, 0, Math.PI*2);
  ctx.fill();
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

window.addEventListener('keydown', e => {
  state.keys[e.key] = true;
  state.adminCode += e.key;
  if (state.adminCode.endsWith('67')) {
    state.adminCount++;
    state.adminCode = '';
  }
  if (state.adminCount >= 3) {
    document.getElementById('adminPanel').style.display = 'block';
    state.adminCount = 0;
  }
});
window.addEventListener('keyup', e => {
  state.keys[e.key] = false;
});

loop();
</script>
</body>
</html>
